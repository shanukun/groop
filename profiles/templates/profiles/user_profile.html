{% extends 'base.html' %}
{% block title %}
    profile detail
{% endblock title %}
{% block content %}
    {% include 'profiles/profile.html'  %}
    <div class="modal fade"
         id="followers-overlay"
         tabindex="-1"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="row mt-3">
                    <!-- nav for tabs -->
                    <nav>
                        <div class="nav nav-pills nav-fill" id="nav-tab" role="tablist">
                            <button class="nav-link active"
                                    id="nav-followers-tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#nav-followers"
                                    type="button"
                                    role="tab"
                                    aria-controls="nav-followers"
                                    aria-selected="true">
                                Followers
                            </button>
                            <button class="nav-link"
                                    id="nav-Following-tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#nav-following"
                                    type="button"
                                    role="tab"
                                    aria-controls="nav-following"
                                    aria-selected="false">
                                Following
                            </button>
                        </div>
                    </nav>
                    <!-- followers list for modal -->
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active"
                             id="nav-followers"
                             role="tabpanel"
                             aria-labelledby="nav-followers-tab"
                             tabindex="0">
                            <div class="row pt-2">
                                {% for item in followers %}
                                    <div class="row mt-2 pb-1 border-bottom">
                                        <div class="col-md-auto">
                                            <img class="xsmall-avatar" src={{ item.avatar.url }} />
                                        </div>
                                        <div class="col">
                                            <div class="row">
                                                <p style="margin-bottom: 1px;">{{ item.user.username }}</p>
                                            </div>
                                            <div class="row">
                                                <small class="text-muted">{{ item.first_name }} {{ item.last_name }}</small>
                                            </div>
                                        </div>
                                        <div class="col-md-auto">
                                            <button class="btn btn-sm btn-outline-dark follow-btn"
                                                    onclick="follower_user(this, {{ item.user.id }}, '{% url "profiles:follow-send-req" %}')">
                                                {% if item.follows %}
                                                    Following
                                                {% else %}
                                                    Follow
                                                {% endif %}
                                            </button>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="tab-pane fade"
                             id="nav-following"
                             role="tabpanel"
                             aria-labelledby="nav-following-tab"
                             tabindex="0">
                            <div class="row pt-2">
                                {% for item in following %}
                                    <div class="row mt-2 pb-1 border-bottom">
                                        <div class="col-md-auto">
                                            <img class="xsmall-avatar" src={{ item.avatar.url }} />
                                        </div>
                                        <div class="col">
                                            <div class="row">
                                                <p style="margin-bottom: 1px;">{{ item.user.username }}</p>
                                            </div>
                                            <div class="row">
                                                <small class="text-muted">{{ item.first_name }} {{ item.last_name }}</small>
                                            </div>
                                        </div>
                                        <div class="col-md-auto">
                                            <button class="btn btn-sm btn-outline-dark follow-btn"
                                                    onclick="follower_user(this, {{ item.user.id }}, '{% url "profiles:follow-send-req" %}')">
                                                {% if item.follows %}
                                                    Following
                                                {% else %}
                                                    Follow
                                                {% endif %}
                                            </button>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include 'posts/create-comment-modal.html' %}
    {% include 'posts/create-toast.html' %}
{% endblock content %}
{% block scripts %}
    <script type="text/javascript">
        modal_focus(gebid('create-comment-overlay'), gebid('create-comment-textbox'), true);
    </script>
{% endblock scripts %}
